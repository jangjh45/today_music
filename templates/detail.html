<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!--    cssë¶€íŠ¸ìŠ¤í¬ë©-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
  <!--    jqueryì¿ í‚¤-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
  <!-- í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
  <title>ì˜¤ë…¸ì¶”</title>
<!--  <iframe width="717" height="538" src="https://www.youtube.com/embed/xgvckGs6xhU"-->
<!--          title="[MV] KIM DONG RYUL(ê¹€ë™ë¥ ) _ Departure(ì¶œë°œ)" frameborder="0"-->
<!--          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"-->
<!--          allowfullscreen></iframe>-->
<!--  <iframe width="956" height="538" src="https://www.youtube.com/embed/6LDg0YGYVw4"-->
<!--          title="[MV] ê°€í˜¸ - 'ì‹œì‘' ï¼œì´íƒœì› í´ë¼ì“°(Itaewon class)ï¼ OST Part.2â™ª" frameborder="0"-->
<!--          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"-->
<!--          allowfullscreen></iframe>-->


  <style>
      * {
          font-family: 'Gowun Dodum', sans-serif;
      }

      .header {
          width: 100%;
      }

      .header > div {
          hegith: 50px;
      }

      .icon {
          float: left;
      }

      .showUser {
          float: right;
          width: 500px;
          font-size: 20px;
          text-align: right;
      }

      .showUser > span {
          margin-right: 20px;
      }

      .mytitle {
          width: 100%;
          height: 300px;
          background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://wallpapercave.com/dwp1x/wp5694376.jpg');
          background-position: center;
          background-size: cover;
          color: white;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }

      .mytitle > button {
          width: 200px;
          height: 50px;
          background-color: transparent;
          color: white;
          border-radius: 50px;
          border: 1px solid white;
          margin-top: 10px;
      }

      .listDetail {
          width: 95%;
          display: flex;
          margin: auto;
          padding: 50px 50px;
          max-width: 1200px;
      }

      .linkInfo {
          width: 400px;
          float: left;
      }

      .detailImg {
          width: 400px;
          height: 250px;
      }

      .detailInfo {
          margin-top: 20px;
          height: 250px;
      }

      .detailInfo > .writerId {
          float: left;
      }

      .detailInfo > .star {
          float: right;
      }

      .detailInfo > hr {
          clear: both;
      }

      .replyInfo {
          width: 650px;
          margin-left: 50px;
      }

      .replyInfo .form-control {
          height: 50px;
      }

      .readReply > .card {
          margin-bottom: 10px;
      }
  </style>
  <script>
      // let url_num = document.location.href.split("/")[4];

      $(document).ready(function () {
          show_inf()
          show_comment()
      });

      function show_inf() {
          $.ajax({
              type: "GET",
              url: "/inf",
              data: {},
              success: function (response) {
                  let rows = response['music_inf']
                  for (let i = 0; i < rows.length; i++) {
                      let link = rows[i]['link']
                      let name = rows[i]['name']
                      let comment = rows[i]['comment']
                      let star = rows[i]['grade']

                      let star_image = 'â­'.repeat(star)

                      if (url_num === link) {
                          let temp_html = `<iframe width="560" height="315" src="{link}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                                        <span><h1>í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì œëª©</h1></span>
                                        <hr/>
                                        <span class="writerId"><h5>${name}</h5></span>
                                        <span class="star"><h5>${star_image}</h5></span>
                                        <hr/>
                                        <span><h6>${comment}</h6></span>`
                          $('#').append(temp_html)
                      }
                  }
              }
          });
      }

      function input_comment() {

          let comment = $('#comment').val()

          if (comment === '') {
              alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
          } else {

              $.ajax({
                  type: 'POST',
                  url: '/detail',
                  data: {comment_give: comment},
                  success: function (response) {
                      alert(response['msg'])
                      window.location.reload()
                  }
              });
          }
      }

      function show_comment() {
          $.ajax({
              type: "GET",
              url: "/detail",
              data: {},
              success: function (response) {
                  let rows = response['comment_input']

                  for (let i = 0; i < rows.length; i++) {
                      let link = rows[i]['link']
                      let comment = rows[i]['comment']

                      if (url_num === link) {
                          let temp_html = ` <div class="card-body">
                                                <   h5 class="card-title">{{nickname}}</h5>
                                                <p class="card-text">${comment}</p>
                                            </div> `

                          $("#comment_list").append(temp_html)
                      }
                  }
              }
          });
      }
  </script>
</head>
<body>
<div class="header">
  <div class="icon"><!-- ì¶”í›„ ì•„ì´ì½˜ ë“¤ì–´ê°ˆ ìë¦¬ --></div>
  <div class="showUser"><span>{{nickname}}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</span></div>
</div>
<div class="mytitle">
  <h1>ì˜¤ë…¸ì¶”: ì˜¤ëŠ˜ì˜ ë…¸ë˜ ì¶”ì²œ</h1>
  <button onClick="location.href='index.html'">ì´ì „ í˜ì´ì§€</button>
</div>
<div class="listDetail">
  <div class="linkInfo">
    <section class="detailImg">
      <img src="#" class="thumbnail" alt="">
    </section>
    <section class="detailInfo">
      <span><h1>{{list.title}}</h1></span>
      <a href="{{list.url}}">ìŒì•…ë“£ê¸°</a>
      <hr/>
      <span class="writerId"><h5>{{nickname}}</h5></span>
      <span class="star"><h5>{{list.star}}</h5></span>
      <hr/>
      <span><h6>{{list.comment}}</h6></span>
    </section>
  </div>
  <div class="replyInfo">
    <section class="insertReply">
      <div class="mb-3">
        <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="ì´ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•´ ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”ğŸµ">
          <button class="btn btn-outline-secondary" id="writeReply">ë“±ë¡í•˜ê¸°</button>
        </div>
      </div>
      <hr/>
    </section>
    <section class="readReply">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">ë‹‰ë„¤ì„</h5>
          <p class="card-text">ì½”ë©˜íŠ¸</p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">ë‹‰ë„¤ì„</h5>
          <p class="card-text">ì½”ë©˜íŠ¸</p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">ë‹‰ë„¤ì„</h5>
          <p class="card-text">ì½”ë©˜íŠ¸</p>
        </div>
      </div>
    </section>
  </div>
</div>
</body>
</html>